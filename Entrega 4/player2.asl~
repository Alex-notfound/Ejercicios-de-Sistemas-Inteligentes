// Agent player1 in project practica2.mas2j

/* Initial beliefs and rules */
/*GANAR*/
colocar(NextX,NextY):- 
						/*Empezar de primero*/
						tablero(X,Y,0)[source(percept)] & tablero([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])[source(percept)] 
						& tablero(4,3,0)[source(percept)] & NextX = 4 & NextY = 3 & .print("Colocar de tablero vacio").
colocar(NextX,NextY):-
						/*Movimientos Bloquear*/
						/*Las lineas 12 y 13 son experimentales*/
						/*not cuatroEnRaya(BestX,BestY) & not tresEnRaya(BestX,BestY) & bloquearCuatroEnRaya(BestX,BestY) & NextX = BestX  & NextY = BestY & .print("not cuatroEnRaya & bloquearCuatroEnRaya & tresEnRaya")
						|not cuatroEnRaya(BestX,BestY) & not dosEnRaya(BestX,BestY) & bloquearCuatroEnRaya(BestX,BestY) & NextX = BestX  & NextY = BestY & .print("not cuatroEnRaya & bloquearCuatroEnRaya & dosEnRaya")
						/*Si no tiene posibilidad de hacer 4 en raya y el contrario si lo bloquea*/
						not cuatroEnRaya(BestX,BestY) & bloquearCuatroEnRaya(BestX,BestY) & NextX = BestX  & NextY = BestY & .print("not cuatroEnRaya & bloquearCuatroEnRaya")
						/*Es posible que usando esto no gane, ya que es para bloquear alguna de las posibilidades del contrario cuando hacer 3 en raya*/
						//|not tresEnRaya(BestX,BestY) & bloquearTresEnRaya(BestX,BestY) & NextX = BestX  & NextY = BestY

						//|not cuatroEnRaya(BestX,BestY) /*& not trenEnRaya(BestX,BestY)*/& bloquearTresEnRaya(BestX,BestY) & NextX = BestX  & NextY = BestY
						/*Movimientos en raya*/
						|cuatroEnRaya(BestX,BestY) & NextX = BestX  & NextY = BestY
						|tresEnRaya(BestX,BestY) & NextX = BestX  & NextY = BestY
						|dosEnRaya(BestX,BestY) & NextX = BestX  & NextY = BestY
     					|unoEnRaya(BestX,BestY) & NextX = BestX  & NextY = BestY
						/*Movimientos empezar de segundo*/
						|tablero(4,3,0)[source(percept)] & NextX = 4 & NextY = 3
						|tablero(X,Y,0)[source(percept)] & NextX = X & NextY = Y.
/*Movimientos colocar. Movimientos para colocar una ficha al lado de alguna puesta en el tablero*/
cuatroEnRaya(BestX,BestY):-
							/*4 en raya. Si se puede colocar una pieza para completar 4 en raya en cualquier situacion(Diagonal, Horizontal y Vertical) y dirección*/
							/*4 en raya diagonal izq a derecha arriba abajo*/
							//4 vacia
							tablero(X,Y,1)[source(percept)] & tablero(X+1,Y+1,1)[source(percept)] & tablero(X+2,Y+2,1)[source(percept)] & tablero(X+3,Y+3,0)[source(percept)] & BestX = X+3 & BestY = Y+3
							//anterior a primera vacia
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y+1,1)[source(percept)] & tablero(X+2,Y+2,1)[source(percept)] & tablero(X-1,Y-1,0)[source(percept)] & BestX = X-1 & BestY = Y-1
							//Medio libres
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y+1,1)[source(percept)] & tablero(X+2,Y+2,0)[source(percept)] & tablero(X+3,Y+3,1)[source(percept)] & BestX = X+2 & BestY = Y+2
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y+1,0)[source(percept)] & tablero(X+2,Y+2,1)[source(percept)] & tablero(X+3,Y+3,1)[source(percept)] & BestX = X+1 & BestY = Y+1
							//anterior primera vacia con 4 bloqueada
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y+1,1)[source(percept)] & tablero(X+2,Y+2,1)[source(percept)] & tablero(X+3,Y+3,2)[source(percept)] & tablero(X-1,Y-1,0)[source(percept)] & BestX = X-1 & BestY = Y-1
							//4 vacia con anterior a primera bloqueada
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y+1,1)[source(percept)] & tablero(X+2,Y+2,1)[source(percept)] & tablero(X+3,Y+3,0)[source(percept)] & tablero(X-1,Y-1,2)[source(percept)] & BestX = X+3 & BestY = Y+3
							/*4 en raya diagonal izq a derecha abajo arriba*/
							//4 vacia
							|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y-1,1)[source(percept)] & tablero(X-2,Y-2,1)[source(percept)] & tablero(X-3,Y-3,0)[source(percept)] & BestX = X-3 & BestY = Y-3
							//anterior a primera vacia
							|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y-1,1)[source(percept)] & tablero(X-2,Y-2,1)[source(percept)] & tablero(X+1,Y+1,0)[source(percept)] & BestX = X+1 & BestY = Y+1
							//Medio libres
							|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y-1,1)[source(percept)] & tablero(X-2,Y-2,0)[source(percept)] & tablero(X-3,Y-3,1)[source(percept)] & BestX = X-2 & BestY = Y-2
							|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y-1,0)[source(percept)] & tablero(X-2,Y-2,1)[source(percept)] & tablero(X-3,Y-3,1)[source(percept)] & BestX = X-1 & BestY = Y-1
							//anterior primera vacia con 4 bloqueada
							|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y-1,1)[source(percept)] & tablero(X-2,Y-2,1)[source(percept)] & tablero(X-3,Y-3,2)[source(percept)] & tablero(X+1,Y+1,0)[source(percept)] & BestX = X+1 & BestY = Y+1
							//4 vacia con anterior a primera bloqueada
							|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y-1,1)[source(percept)] & tablero(X-2,Y-2,1)[source(percept)] & tablero(X-3,Y-3,0)[source(percept)] & tablero(X+1,Y+1,2)[source(percept)] & BestX = X-3 & BestY = Y-3
							/*4 en raya diagonal derecha a izq arriba abajo*/
							//4 vacia
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y-1,1)[source(percept)] & tablero(X+2,Y-2,1)[source(percept)] & tablero(X+3,Y-3,0)[source(percept)] & BestX = X+3 & BestY = Y-3
							//anterior a primera vacia
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y-1,1)[source(percept)] & tablero(X+2,Y-2,1)[source(percept)] & tablero(X-1,Y+1,0)[source(percept)] & BestX = X-1 & BestY = Y+1
							//Medio libres
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y-1,1)[source(percept)] & tablero(X+2,Y-2,0)[source(percept)] & tablero(X+3,Y-3,1)[source(percept)] & BestX = X+2 & BestY = Y-2
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y-1,0)[source(percept)] & tablero(X+2,Y-2,1)[source(percept)] & tablero(X+3,Y-3,1)[source(percept)] & BestX = X+1 & BestY = Y-1
							//anterior primera vacia con 4 bloqueada
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y-1,1)[source(percept)] & tablero(X+2,Y-2,1)[source(percept)] & tablero(X+3,Y-3,2)[source(percept)] & tablero(X-1,Y+1,0)[source(percept)] & BestX = X-1 & BestY = Y+1
							//4 vacia con anterior a primera bloqueada
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y-1,1)[source(percept)] & tablero(X+2,Y-2,1)[source(percept)] & tablero(X+3,Y-3,0)[source(percept)] & tablero(X-1,Y+1,2)[source(percept)] & BestX = X+3 & BestY = Y-3
							/*4 en raya diagonal izq a derecha abajo arriba*/
							//4 vacia
							|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y+1,1)[source(percept)] & tablero(X-2,Y+2,1)[source(percept)] & tablero(X-3,Y+3,0)[source(percept)] & BestX = X-3 & BestY = Y+3
							//anterior a primera vacia
							|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y+1,1)[source(percept)] & tablero(X-2,Y+2,1)[source(percept)] & tablero(X+1,Y-1,0)[source(percept)] & BestX = X+1 & BestY = Y-1
							//Medio libres
							|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y+1,1)[source(percept)] & tablero(X-2,Y+2,0)[source(percept)] & tablero(X-3,Y+3,1)[source(percept)] & BestX = X-2 & BestY = Y+2
							|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y+1,0)[source(percept)] & tablero(X-2,Y+2,1)[source(percept)] & tablero(X-3,Y+3,1)[source(percept)] & BestX = X-1 & BestY = Y+1
							//anterior primera vacia con 4 bloqueada
							|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y+1,1)[source(percept)] & tablero(X-2,Y+2,1)[source(percept)] & tablero(X-3,Y+3,2)[source(percept)] & tablero(X+1,Y-1,0)[source(percept)] & BestX = X+1 & BestY = Y-1
							//4 vacia con anterior a primera bloqueada
							|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y+1,1)[source(percept)] & tablero(X-2,Y+2,1)[source(percept)] & tablero(X-3,Y+3,0)[source(percept)] & tablero(X+1,Y-1,2)[source(percept)] & BestX = X-3 & BestY = Y+3

							/*4 en raya vertical*/
							|tablero(X,Y,1)[source(percept)] & tablero(X,Y+1,1)[source(percept)] & tablero(X,Y+2,1)[source(percept)] & tablero(X,Y+3,0)[source(percept)] & BestX = X & BestY = Y+3
							|tablero(X,Y,1)[source(percept)] & tablero(X,Y+1,1)[source(percept)] & tablero(X,Y+2,0)[source(percept)] & tablero(X,Y+3,1)[source(percept)] & BestX = X & BestY = Y+2
							|tablero(X,Y,1)[source(percept)] & tablero(X,Y+1,0)[source(percept)] & tablero(X,Y+2,1)[source(percept)] & tablero(X,Y+3,1)[source(percept)] & BestX = X & BestY = Y+1
							|tablero(X,Y,1)[source(percept)] & tablero(X,Y+1,1)[source(percept)] & tablero(X,Y+2,1)[source(percept)] & tablero(X,Y-1,0)[source(percept)] & BestX = X & BestY = Y-1
							|tablero(X,Y,1)[source(percept)] & tablero(X,Y+1,1)[source(percept)] & tablero(X,Y+2,1)[source(percept)] & tablero(X,Y+3,2)[source(percept)] & tablero(X,Y-1,0)[source(percept)] & BestX = X & BestY = Y-1
							/*4 en raya horizontal*/
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y,1)[source(percept)] & tablero(X+2,Y,1)[source(percept)] & tablero(X+3,Y,0)[source(percept)] & BestX = X+3 & BestY = Y
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y,1)[source(percept)] & tablero(X+2,Y,0)[source(percept)] & tablero(X+3,Y,1)[source(percept)] & BestX = X+2 & BestY = Y
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y,0)[source(percept)] & tablero(X+2,Y,1)[source(percept)] & tablero(X+3,Y,1)[source(percept)] & BestX = X+1 & BestY = Y
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y,1)[source(percept)] & tablero(X+2,Y,1)[source(percept)] & tablero(X-1,Y,0)[source(percept)] & BestX = X-1 & BestY = Y
							|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y,1)[source(percept)] & tablero(X+2,Y,1)[source(percept)] & tablero(X+3,Y,2)[source(percept)] & tablero(X-1,Y,0)[source(percept)] & BestX = X-1 & BestY = Y.
tresEnRaya(BestX,BestY):-
						/*3 en raya. Si se puede colocar una pieza para completar 3 en raya en cualquier situacion(Diagonal, Horizontal y Vertical) y dirección. Se usa para preparar un 4 en raya.*/
						/*3 en raya diagonal*/
						tablero(X,Y,1)[source(percept)] & tablero(X+1,Y+1,1)[source(percept)] & tablero(X+2,Y+2,0)[source(percept)] & BestX = X+2 & BestY = Y+2
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y+1,0)[source(percept)] & tablero(X+2,Y+2,1)[source(percept)] & BestX = X+1 & BestY = Y+1
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y+1,1)[source(percept)] & tablero(X+2,Y+2,1)[source(percept)] & tablero(X-1,Y-1,0)[source(percept)] & BestX = X-1 & BestY = Y-1
						/*3 en raya vertical*/
						|tablero(X,Y,1)[source(percept)] & tablero(X,Y+1,1)[source(percept)] & tablero(X,Y+2,0)[source(percept)] & BestX = X & BestY = Y+2
						|tablero(X,Y,1)[source(percept)] & tablero(X,Y+1,0)[source(percept)] & tablero(X,Y+2,1)[source(percept)] & BestX = X & BestY = Y+1
						|tablero(X,Y,1)[source(percept)] & tablero(X,Y+1,1)[source(percept)] & tablero(X,Y+2,2)[source(percept)] & tablero(X,Y-1,0)[source(percept)] & BestX = X & BestY = Y-1
						/*3 en raya horizontal*/
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y,1)[source(percept)] & tablero(X+2,Y,0)[source(percept)] & BestX = X+2 & BestY = Y
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y,0)[source(percept)] & tablero(X+2,Y,1)[source(percept)] & BestX = X+1 & BestY = Y
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y,1)[source(percept)] & tablero(X+2,Y,2)[source(percept)] & tablero(X-1,Y,0)[source(percept)] & BestX = X-1 & BestY = Y.
					
dosEnRaya(BestX,BestY):-
						/*2 en raya. Si se puede colocar una pieza para completar 2 en raya en cualquier situacion(Diagonal, Horizontal y Vertical) y dirección, y tener dos piezas juntas*/
						/*2 en raya horizontal*/
						tablero(X,Y,1)[source(percept)] & tablero(X+1,Y,1)[source(percept)] & tablero(X-1,Y,0)[source(percept)] & BestX = X-1 & BestY = Y
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y,1)[source(percept)] & tablero(X+2,Y,0)[source(percept)] & BestX = X+2 & BestY = Y
						/*2 en raya Vertical*/ 
						|tablero(X,Y,1)[source(percept)] & tablero(X,Y+1,1)[source(percept)] & tablero(X,Y+2,0)[source(percept)] & BestX = X & BestY = Y+2
						|tablero(X,Y,1)[source(percept)] & tablero(X,Y+1,1)[source(percept)] & tablero(X,Y-1,0)[source(percept)] & BestX = X & BestY = Y-1
						/*2 en raya Diagonal*/
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y+1,1)[source(percept)] & tablero(X+2,Y+2,0)[source(percept)] & BestX = X+2 & BestY = Y+2
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y+1,1)[source(percept)] & tablero(X-1,Y-1,0)[source(percept)] & BestX = X-1 & BestY = Y-1.
						
unoEnRaya(BestX,BestY):-
						/*1 en raya. Busca situar la pieza a colocar al lado de alguna que esté en el tablero. Es posbile que sobre alguna condicion*/
						//estrategia colocar derecha
						tablero(X,Y,1)[source(percept)] & tablero(X+1,Y,0)[source(percept)]  & BestX = X+1 & BestY = Y
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y,1)[source(percept)]& tablero(X+2,Y,0)[source(percept)]  & BestX = X+2 & BestY = Y
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y,1)[source(percept)]& tablero(X+2,Y,1)[source(percept)]& tablero(X+3,Y,0)[source(percept)]  & BestX = X+3 & BestY = Y
						//estrategia colocar izquierda
						|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y,0)[source(percept)]  & BestX = X-1 & BestY = Y
						|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y,1)[source(percept)]& tablero(X-2,Y,0)[source(percept)]  & BestX = X-2 & BestY = Y
						|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y,1)[source(percept)]& tablero(X-2,Y,1)[source(percept)]& tablero(X-3,Y,0)[source(percept)]  & BestX = X-3 & BestY = Y
						//estrategia colocar arriba
						|tablero(X,Y,1)[source(percept)] & tablero(X,Y+1,0)[source(percept)]  & BestX = X & BestY = Y+1
						|tablero(X,Y,1)[source(percept)] & tablero(X,Y+1,1)[source(percept)]& tablero(X,Y+2,0)[source(percept)]  & BestX = X & BestY = Y+2
						|tablero(X,Y,1)[source(percept)] & tablero(X,Y+1,1)[source(percept)]& tablero(X,Y+2,1)[source(percept)]& tablero(X,Y+3,0)[source(percept)]  & BestX = X & BestY = Y+3
						//estrategia colocar abajo
						|tablero(X,Y,1)[source(percept)] & tablero(X,Y-1,0)[source(percept)]  & BestX = X & BestY = Y-1
						|tablero(X,Y,1)[source(percept)] & tablero(X,Y-1,1)[source(percept)]& tablero(X,Y-2,0)[source(percept)]  & BestX = X & BestY = Y-2
						|tablero(X,Y,1)[source(percept)] & tablero(X,Y-1,1)[source(percept)]& tablero(X,Y-2,1)[source(percept)]& tablero(X,Y-3,0)[source(percept)]  & BestX = X & BestY = Y-3
						//estrategia colocar diagonal arriba izquierda
						|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y-1,0)[source(percept)]  & BestX = X-1 & BestY = Y-1
						|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y-1,1)[source(percept)]& tablero(X-2,Y-2,0)[source(percept)]  & BestX = X-2 & BestY = Y-2
						|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y-1,1)[source(percept)]& tablero(X-2,Y-2,1)[source(percept)]& tablero(X-3,Y-3,0)[source(percept)]  & BestX-3 = X & BestY = Y-3
						//estrategia colocar diagonal arriba derecha
						|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y+1,0)[source(percept)]  & BestX = X-1 & BestY = Y+1
						|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y+1,1)[source(percept)]& tablero(X-2,Y+2,0)[source(percept)]  & BestX = X-2 & BestY = Y+2
						|tablero(X,Y,1)[source(percept)] & tablero(X-1,Y+1,1)[source(percept)]& tablero(X-2,Y+2,1)[source(percept)]& tablero(X-3,Y+3,0)[source(percept)]  & BestX-3 = X & BestY = Y+3
						//estrategia colocar diagonal abajo izquierda
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y-1,0)[source(percept)]  & BestX = X+1 & BestY = Y-1
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y-1,1)[source(percept)]& tablero(X+2,Y-2,0)[source(percept)]  & BestX = X+2 & BestY = Y-2
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y-1,1)[source(percept)]& tablero(X+2,Y-2,1)[source(percept)]& tablero(X+3,Y-3,0)[source(percept)]  & BestX+3 = X & BestY = Y-3
						//estrategia colocar diagonal abajo derecha
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y+1,0)[source(percept)]  & BestX = X+1 & BestY = Y+1
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y+1,1)[source(percept)]& tablero(X+2,Y+2,0)[source(percept)]  & BestX = X+2 & BestY = Y+2
						|tablero(X,Y,1)[source(percept)] & tablero(X+1,Y+1,1)[source(percept)]& tablero(X+2,Y+2,1)[source(percept)]& tablero(X+3,Y+3,0)[source(percept)]  & BestX+3 = X & BestY = Y+3.		
	
/*Movimientos Bloquear. Usados para bloquear al contrario. */					
bloquearCuatroEnRaya(BestX,BestY):-
						/*Bloquear 4 en raya. Evita que el contrario haga 4 en raya, excepto que tenga 2 posibilidades para ganar*/
						/*Bloquear 4 en raya diagonal*/
						tablero(X,Y,2)[source(percept)] & tablero(X+1,Y+1,2)[source(percept)] & tablero(X+2,Y+2,2)[source(percept)] & tablero(X-1,Y-1,1)[source(percept)] & tablero(X+3,Y+3,0)[source(percept)] & BestX = X+3 & BestY = Y+3
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y+1,2)[source(percept)] & tablero(X+2,Y+2,2)[source(percept)] & tablero(X+3,Y+3,1)[source(percept)] & tablero(X-1,Y-1,0)[source(percept)] & BestX = X-1 & BestY = Y-1
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y+1,2)[source(percept)] & tablero(X+2,Y+2,0)[source(percept)] & tablero(X+3,Y+3,2)[source(percept)] & BestX = X+2 & BestY = Y+2
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y+1,0)[source(percept)] & tablero(X+2,Y+2,2)[source(percept)] & tablero(X+3,Y+3,2)[source(percept)] & BestX = X+1 & BestY = Y+1
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y+1,2)[source(percept)] & tablero(X+2,Y+2,2)[source(percept)] & tablero(X-1,Y-1,0)[source(percept)] & BestX = X-1 & BestY = Y-1
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y+1,2)[source(percept)] & tablero(X+2,Y+2,2)[source(percept)] & tablero(X+3,Y+3,0)[source(percept)] & BestX = X+3 & BestY = Y+3
						
						/*Bloquear 4 en raya vertical*/
						|tablero(X,Y,2)[source(percept)] & tablero(X,Y+1,2)[source(percept)] & tablero(X,Y+2,2)[source(percept)] & tablero(X,Y-1,1)[source(percept)] & tablero(X,Y+3,0)[source(percept)] & BestX = X & BestY = Y+3
						|tablero(X,Y,2)[source(percept)] & tablero(X,Y+1,2)[source(percept)] & tablero(X,Y+2,2)[source(percept)] & tablero(X,Y+3,1)[source(percept)] & tablero(X,Y-1,0)[source(percept)] & BestX = X & BestY = Y-1
						|tablero(X,Y,2)[source(percept)] & tablero(X,Y+1,2)[source(percept)] & tablero(X,Y+2,0)[source(percept)] & tablero(X,Y+3,2)[source(percept)] & BestX = X & BestY = Y+2
						|tablero(X,Y,2)[source(percept)] & tablero(X,Y+1,0)[source(percept)] & tablero(X,Y+2,2)[source(percept)] & tablero(X,Y+3,2)[source(percept)] & BestX = X & BestY = Y+1
						|tablero(X,Y,2)[source(percept)] & tablero(X,Y+1,2)[source(percept)] & tablero(X,Y+2,2)[source(percept)] & tablero(X,Y-1,0)[source(percept)] & BestX = X & BestY = Y-1
						|tablero(X,Y,2)[source(percept)] & tablero(X,Y+1,2)[source(percept)] & tablero(X,Y+2,2)[source(percept)] & tablero(X,Y+3,0)[source(percept)] & BestX = X & BestY = Y+3
						
						/*Bloquear 4 en raya horizontal*/
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y,2)[source(percept)] & tablero(X+2,Y,2)[source(percept)] & tablero(X-1,Y,1)[source(percept)] & tablero(X+3,Y,0)[source(percept)] & BestX = X+3 & BestY = Y
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y,2)[source(percept)] & tablero(X+2,Y,2)[source(percept)] & tablero(X+3,Y,1)[source(percept)] & tablero(X-1,Y,0)[source(percept)] & BestX = X-1 & BestY = Y
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y,2)[source(percept)] & tablero(X+2,Y,0)[source(percept)] & tablero(X+3,Y,2)[source(percept)] & BestX = X+2 & BestY = Y
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y,0)[source(percept)] & tablero(X+2,Y,2)[source(percept)] & tablero(X+3,Y,2)[source(percept)] & BestX = X+1 & BestY = Y
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y,2)[source(percept)] & tablero(X+2,Y,2)[source(percept)] & tablero(X-1,Y,0)[source(percept)] & BestX = X-1 & BestY = Y
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y,2)[source(percept)] & tablero(X+2,Y,2)[source(percept)] & tablero(X+3,Y,0)[source(percept)] & BestX = X+3 & BestY = Y.

bloquearTresEnRaya(BestX,BestY):- //listo
						/*Bloquear 3 en raya. Evita que el contrario pueda colocar 3 en raya.*/
						/*Bloquear 3 en raya horizontal*/
						tablero(X,Y,2)[source(percept)] & tablero(X+1,Y,2)[source(percept)] & tablero(X-1,Y,0)[source(percept)] & BestX = X-1 & BestY = Y
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y,2)[source(percept)] & tablero(X+2,Y,0)[source(percept)] & BestX = X+2 & BestY = Y
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y,0)[source(percept)] & tablero(X+2,Y,1)[source(percept)] & BestX = X+1 & BestY = Y
						/*Bloquear 3 en raya Vertical*/ 
						|tablero(X,Y,2)[source(percept)] & tablero(X,Y+1,2)[source(percept)] & tablero(X,Y-1,0)[source(percept)] & BestX = X & BestY = Y-1
						|tablero(X,Y,2)[source(percept)] & tablero(X,Y+1,2)[source(percept)] & tablero(X,Y+2,0)[source(percept)] & BestX = X & BestY = Y+2
						|tablero(X,Y,2)[source(percept)] & tablero(X,Y+1,0)[source(percept)] & tablero(X,Y+2,1)[source(percept)] & BestX = X & BestY = Y+1
						/*Bloquear 3 en raya Diagonal*/
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y+1,2)[source(percept)] & tablero(X-1,Y-1,0)[source(percept)] & BestX = X-1 & BestY = Y-1
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y+1,2)[source(percept)] & tablero(X+2,Y+2,0)[source(percept)] & BestX = X+2 & BestY = Y+2
						|tablero(X,Y,2)[source(percept)] & tablero(X+1,Y+1,0)[source(percept)] & tablero(X+2,Y+2,1)[source(percept)] & BestX = X+1 & BestY = Y+1.
/*PERDER*/
colocarPerder(NextX,NextY):- 
							/*Empezar de primero*/
							tablero(X,Y,0)[source(percept)] & tablero([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])[source(percept)] 
							& NextX = X & NextY = Y & .print("Colocar de tablero vacio").
colocarPerder(NextX,NextY):-
							/*Intenta ir a que el contrariohaga 4 e raya*/
							//not cuatroEnRaya(BestX,BestY) & colocarFicha(BestX,BestY) & NextX = BestX  & NextY = BestY.
							not cuatroEnRaya(X,Y) & unoEnRaya(BestX,BestY) & NextX = BestX & NextY = BestY &  .print("--------------------------------------------------unoEnRaya--------------------------------------------------")//uno cualquiera que no haga 4 en raya
						//	| not dosEnRaya(BestX,BestY) & colocarFicha(BestX,BestY) & NextX = BestX & NextY = BestY & .print("-------------------------------------------------dosEnRaya--------------------------------------------------")//uno cualquiera que no haga 4 en raya
							|tresEnRaya(BestX,BestY) & NextX = BestX  & NextY = BestY & not cuatroEnRaya(X,Y) & .print("------------------------------------------------tresEnRaya--------------------------------------------------")//uno cualquiera que no haga 4 en raya
							|dosEnRaya(BestX,BestY) & NextX = BestX  & NextY = BestY & not cuatroEnRaya(X,Y) & .print("------------------------------------------------dosEnRaya--------------------------------------------------")//uno cualquiera que no haga 4 en raya
							|unoEnRaya(BestX,BestY) & NextX = BestX  & NextY = BestY & not cuatroEnRaya(X,Y) & .print("------------------------------------------------UnoEnRaya--------------------------------------------------")//uno cualquiera que no haga 4 en raya
							|tablero(X,Y,0)[source(percept)] & NextX = X & NextY = Y & not cuatroEnRaya(X,Y) & .print("------------------------------------------------Aleatorio--------------------------------------------------")//uno cualquiera que no haga 4 en raya
							|tablero(X,Y,0)[source(percept)] & NextX = X & NextY = Y & .print("--------------------------------------------------Movimiento final aleatorio--------------------------------------------------").

colocarFicha(BestX,BestY):-
							tablero(X,Y,0)[source(percept)] & tablero(X+1,Y,0)[source(percept)]  & BestX = X & BestY = Y.

/* Initial goals */

!start.

/* Plans */
+!start <-.wait(turno(player2)[source(percept)]); !jugar.
+!jugar : estrategia(jugarAGanar)
					<- //preguntar por el valor de X e Y  al belief 
						.print("GANANDO");
						?colocar(NextX,NextY);
						//pasar el valor de X e Y con 
						put(NextX,NextY);
						!start.
/*	GANA EL QUE NO BLOQUEA
[player1] Colocar de tablero vacio
[Blackboard] player1 doing: put(4,3), turno:1
[Blackboard] player2 doing: put(3,3), turno:2
[player1] GANANDO
[Blackboard] player1 doing: put(5,3), turno:1
[Blackboard] player2 doing: put(2,3), turno:2
[player1] GANANDO
[Blackboard] player1 doing: put(1,3), turno:1
[Blackboard] player2 doing: put(2,4), turno:2
[player1] GANANDO
[Blackboard] player1 doing: put(2,2), turno:1
[Blackboard] player2 doing: put(2,5), turno:2
[player1] GANANDO
[Blackboard] player1 doing: put(2,6), turno:1
[Blackboard] player2 doing: put(3,5), turno:2
[player1] GANANDO
[Blackboard] player1 doing: put(1,5), turno:1
[Blackboard] player2 doing: put(4,6), turno:2
[player1] GANANDO
[Blackboard] player1 doing: put(5,7), turno:1
[Blackboard] player2 doing: put(3,4), turno:2
[player1] GANANDO
[Blackboard] player1 doing: put(3,2), turno:1
[Blackboard] player2 doing: put(3,6), turno:2
[Blackboard] Ganador player2
*/
/*CAMBIAR LINEA 110	DEL .java POR ESTA PARA JUGAR A PERDER	modoJuego = MODO_JUGAR_A_PERDER;						//cambiar modoJuego*/

+!jugar : estrategia(jugarAPerder) //& tablero(X,Y,0)[source(percept)] <- put(X,Y); !start.
					<- //preguntar por el valor de X e Y  al belief 
						.print("PERDIENDO");	
						?colocarPerder(NextX,NextY);
						//pasar el valor de X e Y con 
						put(NextX,NextY);
						!start.


























































